version: '3.5'

volumes:
  www:

services:
    memcache:
      image: memcached
      command: memcached -m 256 -vv

    apache:
      image: nickbreen/wp-www:apache-v3.0.0
      build:
          context: apache
      ports:
        - "80:80"
      links:
        - fpm:fastcgi
        - memcache:memcache
      volumes:
        - www:/var/www
        - ./default.conf:/etc/apache2/sites-available/000-default.conf:ro

    fpm:
      image: nickbreen/wp-www:fpm-v3.0.0
      build:
          context: fpm
      volumes:
        - www:/var/www
      links:
        - memcache

